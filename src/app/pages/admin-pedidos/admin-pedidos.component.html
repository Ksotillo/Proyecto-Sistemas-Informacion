<nav-bar></nav-bar>
<div class="container" style="margin-top: 3vh;">
  <div class="row">
    <div class="col-3">
      <app-side-bar></app-side-bar>
    </div>
    <div class="col-9">
      <div class="container" >
        <h1 class="adminView-Title">Gestión de Pedidos</h1>
        <div *ngIf = 'this.currentPedido'>
          <div *ngIf = 'isEditing'>
            <app-invoice-form  [invoice] = 'currentPedido' [readVar] = '' (invoiceOUT) = 'manageInvoiceBack($event)'></app-invoice-form>
          </div>
          <div *ngIf = '!isEditing'>
            <app-invoice-form  [invoice] = 'currentPedido' [readVar] = 'readonlyPrompt' (invoiceOUT) = 'manageInvoiceBack($event)'></app-invoice-form>
          </div>
        </div>
        <button class = 'btn btn-success' (click) = 'createNewInvoice()'>Nuevo Pedido</button>
        <button class="btn btn-warning" (click) = 'editInvoice()' *ngIf = 'this.currentPedido && !isEditing'>Editar Pedido</button>

        <div class="alert alert-danger alert-dismissible fade show" role="alert" *ngIf = 'this.hasError'>
          <strong>¡Peligro!</strong> Guarde o descarte el pedido actual antes de añadir un nuevo producto
          <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click) = 'resetError()'>
          <span aria-hidden="true">&times;</span>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <div *ngIf = '!isEditing'>
      <h3 class="h3">Seleccione el Pedido que desea Visualizar</h3>
        <div class = "container" >
          <div class="card-group">
                <div class="card"  *ngFor = 'let invoice of listaPedidos'>
                  <app-invoice-description [pedido] = 'invoice' (pedidoOUT) = 'pedidoSelectManager($event)'></app-invoice-description>
                </div>  
              </div>
        </div>
      </div>
    </div>
  </div>
</div>